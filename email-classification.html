<!DOCTYPE html>
<html lang="en">

<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5F9Y9HC95G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5F9Y9HC95G');
</script>
<script data-ad-client="ca-pub-8325812071117232" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Chrome, Firefox OS and Opera Status Bar Color -->
  <meta name="theme-color" content="#FFFFFF">
  <meta property="og:title" content="Email Classification">
    <meta property="og:type" content="blog">
  <title>Email Classification</title>
  <!-- Favicon -->
    <link rel="shortcut icon" href="⚡">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
  <link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
  <link rel="stylesheet" type="text/css" href="css/notablog.css">
  <link rel="stylesheet" type="text/css" href="css/theme.css">
  <style>
    :root {
      font-size: 18px;
    }

    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
    <a href="index">
      <div class="Navbar__Btn"><span>⚡</span> <span>Home</span></div>
    </a>
                                                                                                                                            <span class="Navbar__Delim">&centerdot;</span>
    <a href="projects">
      <div class="Navbar__Btn"> <span>Projects</span></div>
    </a>
                <span class="Navbar__Delim">&centerdot;</span>
    <a href="notes">
      <div class="Navbar__Btn"> <span>Notes</span></div>
    </a>
                <span class="Navbar__Delim">&centerdot;</span>
    <a href="apps">
      <div class="Navbar__Btn"> <span>Apps</span></div>
    </a>
                <span class="Navbar__Delim">&centerdot;</span>
    <a href="about">
      <div class="Navbar__Btn"> <span>About</span></div>
    </a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          </nav>
  <header class="Header">
          <div class="Header__Cover">
        <img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fb617d7ad-cdfa-4aa7-9843-824c377e62c9%2FUntitled.png?table=block&id=ab331407-32d0-4923-8ae5-7e3d84856ce2">
      </div>
          <div class="Header__Spacer ">
    </div>
        <div class="Header__Icon"><span><img class="inline-img-icon" src="https://super.so/icon/dark/mail.svg"></span></div>
        <h1 class="Header__Title">Email Classification</h1>
            <div class="DateTagBar">
                <span class="DateTagBar__Item DateTagBar__Date">Posted on Wed, Jan 13, 2021</span>
                          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/nlp">nlp</a>
          </span>
                <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--brown">
            <a href="tag/text classification">text classification</a>
          </span>
                <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--undefined">
            <a href="tag/freelance project">freelance project</a>
          </span>
                  </div>
          </header>
      <article id="https://www.notion.so/ab33140732d049238ae57e3d84856ce2" class="PageRoot"><h1 id="https://www.notion.so/183bbe4de8494f3192a9bed3932adf86" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/183bbe4de8494f3192a9bed3932adf86"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Objective</span></span></h1><div id="https://www.notion.so/b2c61104707c41c985251d1b38f9cd45" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">ML Category: </strong></span><span class="SemanticString">Multi-class Supervised Classification</span></span></p></div><div id="https://www.notion.so/3c211ac84d4842fa893aa690854f1fe4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Task:</strong></span><span class="SemanticString"> Email Classification</span></span></p></div><div id="https://www.notion.so/6189b0b886814cde87efcfff8e4b4737" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Evaluation Metric: </strong></span><span class="SemanticString">Softmax Accuracy</span></span></p></div><h1 id="https://www.notion.so/c72a0c71135e4ac1a15837e7aaae4df4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/c72a0c71135e4ac1a15837e7aaae4df4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Proposed Framework</span></span></h1><div id="https://www.notion.so/8f748c1b7cd443ca98f44ed780014218" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Ensemble of 4 models - Count Vectorizer, TFIDF, FastText and Transformer</span></span></p></div><div id="https://www.notion.so/b8a4d9a8414849ef93e131ad91a7f191" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Junk Mail Classification - Binary Classifier</span></span></p></div><div id="https://www.notion.so/06e67a75f4434be395e4408860d20ad2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Candidate Selection Model - Transformer (</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://simpletransformers.ai/docs/multi-class-classification/">ref</a></span><span class="SemanticString">), 4/256 BERT mini</span></span></p></div><div id="https://www.notion.so/124d6b333d9b4728a5d14789624eae34" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Candidate Selection Model 2 - Keras Classifier (</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://mc.ai/a-complete-multi-class-text-classifier-step-by-step/">ref</a></span><span class="SemanticString">), FastText (</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/facebookresearch/fastText">ref</a></span><span class="SemanticString">, </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://fasttext.cc/docs/en/cheatsheet#content">ref</a></span><span class="SemanticString">)</span></span></p></div><div id="https://www.notion.so/664c7e053b1c47c1bb2504a9ad2c72db" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Re-ranking Model 1 - CountVectorizer Cosine Similarity with 2-gram tokenization</span></span></p></div><div id="https://www.notion.so/3159932b1ddc41db8eb7054385053c50" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Re-ranking Model 2 - TF-IDF Classification with 3-gram tokenization and scikit classifier (</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://birinder1469.github.io/BirinderSingh_Blog/MultiClass-Classification/">ref</a></span><span class="SemanticString">)</span></span></p></div><h1 id="https://www.notion.so/47a9db550f134e289902245d632032e4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/47a9db550f134e289902245d632032e4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Process Flow</span></span></h1><ol class="NumberedListWrapper"><li id="https://www.notion.so/c162a52e9759437297e37f4ff8a0d8b9" class="NumberedList" value="1"><span class="SemanticStringArray"><span class="SemanticString">Ingestion - SQL server to Python. Stored as pandas dataframe object.</span></span></li><li id="https://www.notion.so/0c031de0294042d3a77810b9a53ca292" class="NumberedList" value="2"><span class="SemanticStringArray"><span class="SemanticString">Wrangling - Understand data, correct and validate</span></span></li><li id="https://www.notion.so/d9959c1a626f4889a734c935955ae961" class="NumberedList" value="3"><span class="SemanticStringArray"><span class="SemanticString">Cleaning - Level 1 and Level 2</span></span></li><li id="https://www.notion.so/070307593df248aebff4526d19dfdc1d" class="NumberedList" value="4"><span class="SemanticStringArray"><span class="SemanticString">Model 1A - Transformer</span></span></li><li id="https://www.notion.so/ac35360bfbf64921bbc5719df6aad4ad" class="NumberedList" value="5"><span class="SemanticStringArray"><span class="SemanticString">Model 1B - FastText</span></span></li><li id="https://www.notion.so/4e09a364b8454d17a9015eddc27ae17e" class="NumberedList" value="6"><span class="SemanticStringArray"><span class="SemanticString">Model 1C - Count Vectorizer Input Target Similarity</span></span></li><li id="https://www.notion.so/73ef9bb88c034ee4845628afc1b62559" class="NumberedList" value="7"><span class="SemanticStringArray"><span class="SemanticString">Model 1D - TF-IDF Classifier</span></span></li><li id="https://www.notion.so/64bd2cd74151486a9f310edcddca0c6e" class="NumberedList" value="8"><span class="SemanticStringArray"><span class="SemanticString">Ensemble - Weighted scoring of Model 1A, 1B, 1C and 1D</span></span></li><li id="https://www.notion.so/dd452476a4264646a5e16cb80d03ac6a" class="NumberedList" value="9"><span class="SemanticStringArray"><span class="SemanticString">Packaging </span></span></li></ol><h1 id="https://www.notion.so/af9c22da9d864b9e9c74273b20fb5623" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/af9c22da9d864b9e9c74273b20fb5623"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Data Ingestion</span></span></h1><div id="https://www.notion.so/06e2b97862ec4ce4974d9ed2d812f886" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">First, we tried to extract data from the SQL backup file, but due to application-level and OS-level dependencies, we tried to find an alternative ingestion approach. Then, we activated the SQL server, and data was fetched in the python environment using the python ODBC driver. After running the ingestion command for 8 hours, we successfully ingested the data with 4 columns. Then we verified the ingestion, we serialized the data in pandas dataframe format for further processing.</span></span></p></div><h1 id="https://www.notion.so/bacb606fc624434ba6e4db5c277cdf05" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/bacb606fc624434ba6e4db5c277cdf05"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Data Wrangling</span></span></h1><div id="https://www.notion.so/b682d345fdf04bf6be112153bb079fe6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">We renamed the columns. Then we dropped all missing values on these 2 columns. Dropped the duplicates, replaced blank cells with a null identifier and again dropped all rows with any missing value. Then we merged subject and body columns, separated by a unique identifier. Similarly, we also merged category and subcategory types, separated by a unique identifier. </span></span></p></div><div id="https://www.notion.so/8d3e3312458b458ca8fd8959ccebc49c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><h1 id="https://www.notion.so/7aa14b3daff54d1299eac2dc6637fe43" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--1"><a class="Anchor" href="#https://www.notion.so/7aa14b3daff54d1299eac2dc6637fe43"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Final Deliverable</span></span></h1><div id="https://www.notion.so/f26440935a4f45b9993f70dba9c4efe9" class="Image Image--PageWidth"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fda671e9f-bfa8-4aec-9060-3f1917a4cea7%2FUntitled.png?width=868&amp;table=block&amp;id=f2644093-5a4f-45b9-993f-70dba9c4efe9"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fda671e9f-bfa8-4aec-9060-3f1917a4cea7%2FUntitled.png?width=868&amp;table=block&amp;id=f2644093-5a4f-45b9-993f-70dba9c4efe9" style="width:100%"/></a><figcaption><span class="SemanticStringArray"></span></figcaption></figure></div></article>  <footer class="Footer">
        <div>&copy; Sparsh Agarwal 2021</div>
        <div>&centerdot;</div>
        <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
            rel="noopener noreferrer">Notablog</a>.
        </div>
    </footer>
</body>

</html>